<!--components/my-calendar/my-calendar.wxml-->


<wxs src='../../filter/formatStr.wxs' module="unit" />



<view class="component-calendar">
	<view class="picker">
		<!-- å¸‚åŒºé€‰æ‹© -->
		<picker mode="region" value="{{selectedRegion}}" level="province" bindchange="rigionChangeHandle">
			<view class="picker-region">
				<image class="icon-location" src="/images/icons/location_fill.png" mode="" />
				<text>{{selectedRegion[1]}}</text>
			</view>
		</picker>
		<!-- ðŸš©æ—¥æœŸé€‰æ‹©å™¨ -->
		<picker mode="date" header-text="é€‰æ‹©æ—¶é—´" fields="month" value="{{currentDate.currentDateToMonth}}" bindchange="dateChangeHandle">
			<view class="picker-date">
				<text></text>
				{{currentDate.currentDateToMonth}}
			</view>
		</picker>
		<!-- å›žåˆ°ä»Šå¤©åŠŸèƒ½ï¼Œå½“ä¸ºä»Šå¤©æ—¶éšè— -->
		<view class="goToToday" hidden="{{currentDate.today == currentDate.selectDayObj.date}}" bindtap="goToTodayHandle">ä»Š</view>
		<view class="showSuit" bindtap="showSuit">{{suitTitle}}</view>
	</view>
	<scroll-view class="suit-list" hidden="{{isShowSuit}}" scroll-x="true" >
		<view class="suit-item {{suit==selectedSuitVal?'effect-selectedSuitHead':''}}" wx:for="{{suits}}" wx:key="index" wx:for-item="suit" data-suit="{{suit}}" bindtap="selectSuitHandle">{{suit}}</view>
	</scroll-view>
	<!-- æ—¥æœŸè¡¨æ ¼ -->
	<view class="table">
		<!-- æ˜ŸæœŸ -->
		<view class="tr">
			<view class="th">
				æ—¥
			</view>
			<view class="th">
				ä¸€
			</view>
			<view class="th">
				äºŒ
			</view>
			<view class="th">
				ä¸‰
			</view>
			<view class="th">
				å››
			</view>
			<view class="th">
				äº”
			</view>
			<view class="th">
				å…­
			</view>
		</view>
		<!-- æ¯å‘¨ -->
		<view class="tr" wx:for="{{selectedYearArr[unit.filteDate(currentDate.currentDateToMonth) - 1].weeks}}" hidden="{{ !isUnfold&&(index == currentDate.selectDayObj.atWeekOfMonth ? false: true)}}" wx:for-item="oneWeek" wx:key="index">
			<!-- ä¸€å‘¨çš„æ¯å¤© -->
			<view class="td {{ unit.isSelected(day,currentDate.selectDayObj) }} {{unit.isSubString(day.suit,selectedSuitVal)}}" wx:for="{{oneWeek}}" wx:for-item='day' wx:for-index='idx' wx:key="idx" data-day="{{day}}" bindtap="selectDayHandle">
				<view class="calendar">
					<view class="solarCalendar {{day.weekDay >= 6 ? 'dayOff' : ''}}">
						{{unit.filteDate(day.date)}}
					</view>
					<view class="lunarCalendar {{unit.is_FestivalOr_solarTerms(day) ? 'isFestival' : ''}}">
						<!-- {{unit.getLastTwoChars(day.lunarCalendar)}} -->
						{{unit.fil_FestivalOr_solarTerms(day)}}
					</view>
				</view>
			</view>
		</view>

	</view>
	<view class="unfold" bindtap="unfoldHandle">
		<image class="icon-fold" src="{{icon_foldArr[isUnfold ? 1 : 0]}}" mode="" />
		<text> {{isUnfold ? "æ”¶èµ·" : "å±•å¼€"}}</text>
	</view>
</view>